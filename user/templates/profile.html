{% extends "common/base.html" %}

{% block title %}Profile – {{ user_obj.display_name }}{% endblock %}

{% block content %}
<main class="pattern">
  <div class="wrapper">
    <div class="container margin_80_55">

      <!-- profile header -->
      <div class="row g-4 justify-content-center">
        <div class="col-lg-10">

          <div class="card shadow-sm mb-4">
            <div class="card-body d-flex flex-column flex-md-row align-items-md-center">
              <div class="flex-grow-1">
                <h2 class="card-title mb-1">
                  <i class="material-icons text-primary align-middle me-1 fs-3">account_circle</i>
                  {{ user_obj.display_name }}
                </h2>
                <p class="text-muted mb-0">Member since {{ user_obj.yelping_since }}</p>
              </div>

              <!-- quick stats -->
              <ul class="list-inline mb-0 mt-3 mt-md-0">
                <li class="list-inline-item me-3">
                  <span class="h5 mb-0">{{ user_obj.review_count }}</span><br>
                  <small class="text-muted">Reviews</small>
                </li>
                <li class="list-inline-item me-3">
                  <span class="h5 mb-0">{{ user_obj.fans }}</span><br>
                  <small class="text-muted">Fans</small>
                </li>
                <li class="list-inline-item">
                  <span class="h5 mb-0">{{ user_obj.average_stars|floatformat:1 }}</span><br>
                  <small class="text-muted">Avg&nbsp;Stars</small>
                </li>
              </ul>
            </div>
          </div>

          <!-- user information -->
          <div class="card shadow-sm mb-4">
            <div class="card-header bg-light">
              <h5 class="mb-0">
                <i class="material-icons align-middle me-1">info</i>User information
              </h5>
            </div>
            <div class="card-body">
              <dl class="row mb-0">
                <dt class="col-sm-4">Email</dt>
                <dd class="col-sm-8">{{ user_obj.email }}</dd>

                <dt class="col-sm-4">Elite years</dt>
                <dd class="col-sm-8">
                  {% if user_obj.elite_years %}
                    {{ user_obj.elite_years|join:", " }}
                  {% else %}
                    —
                  {% endif %}
                </dd>
              </dl>
            </div>
          </div>

          <!-- compliments -->
          <div class="card shadow-sm mb-4">
            <div class="card-header bg-light">
              <h5 class="mb-0">
                <i class="material-icons align-middle me-1">thumb_up</i>Compliments
              </h5>
            </div>
            <div class="card-body">
        <li>Hot: {{ user_obj.compliment_hot }}</li>
        <li>More: {{ user_obj.compliment_more }}</li>
        <li>Profile: {{ user_obj.compliment_profile }}</li>
        <li>Cute: {{ user_obj.compliment_cute }}</li>
        <li>List: {{ user_obj.compliment_list }}</li>
        <li>Note: {{ user_obj.compliment_note }}</li>
        <li>Plain: {{ user_obj.compliment_plain }}</li>
        <li>Cool: {{ user_obj.compliment_cool }}</li>
        <li>Funny: {{ user_obj.compliment_funny }}</li>
        <li>Writer: {{ user_obj.compliment_writer }}</li>
        <li>Photos: {{ user_obj.compliment_photos }}</li>
            </div>
          </div>

          <!-- reviews -->
          <div class="card shadow-sm mb-4">
            <div class="card-header bg-light">
              <h5 class="mb-0">
                <i class="material-icons align-middle me-1">rate_review</i>Your reviews
              </h5>
            </div>
            <div class="card-body">
              {% if reviews %}
                <div class="list-group">
                  {% for review in reviews %}
                    <div class="list-group-item">
                      <h6 class="mb-1">
                        {{ review.business.name }}
                        <span class="ms-2 badge bg-warning text-dark">{{ review.stars }} ★</span>
                      </h6>
                      <small class="text-muted">{{ review.date|date:"Y-m-d" }}</small>
                      <p class="mb-0 mt-2">{{ review.text }}</p>
                    </div>
                  {% endfor %}
                </div>
              {% else %}
                <p class="mb-0 text-muted">You have no reviews yet.</p>
              {% endif %}
            </div>
          </div>

          <!-- tips -->
          <div class="card shadow-sm mb-4">
            <div class="card-header bg-light">
              <h5 class="mb-0">
                <i class="material-icons align-middle me-1">lightbulb</i>Your tips
              </h5>
            </div>
            <div class="card-body">
              {% if tips %}
                <div class="list-group">
                  {% for tip in tips %}
                    <div class="list-group-item">
                      <h6 class="mb-1">{{ tip.business.name }}</h6>
                      <small class="text-muted">{{ tip.date|date:"Y-m-d" }}</small>
                      <p class="mb-0 mt-2">{{ tip.text }}</p>
                    </div>
                  {% endfor %}
                </div>
              {% else %}
                <p class="mb-0 text-muted">You have no tips yet.</p>
              {% endif %}
            </div>
          </div>

          <!-- logout -->
          <form method="post" action="{% url 'user:logout' %}" class="text-center">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline-danger">
              <i class="material-icons align-middle me-1">logout</i>Logout
            </button>
          </form>

        </div>
      </div>
    </div>
  </div>
</main>
{% endblock %}

{% block extra_js %}{% endblock %}
